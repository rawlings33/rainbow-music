<!-- Save as index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Rainbow Music</title>
  <meta name="color-scheme" content="dark">

  <style>
    /* Mobile-first, portrait-only app */
    :root{
      --bg:#070707;
      --surface:#0e0e0e;
      --accent:#ff2b2b;    /* Red accent like YouTube Music */
      --muted:#bfb8b8;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
      --max-width:420px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;-webkit-font-smoothing:antialiased}
    /* center the app on larger widths, mobile-only feeling */
    .device{
      width:100%;
      max-width:var(--max-width);
      margin:10px auto;
      border-radius:26px;
      overflow:hidden;
      background:linear-gradient(180deg,var(--surface),#0b0b0b);
      border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 18px 50px rgba(0,0,0,0.7);
      height:800px; /* fixed portrait frame for investor presentation */
      position:relative;
      display:flex;
      flex-direction:column;
    }

    /* Top header */
    header.appbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 14px;
      gap:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      border-bottom:1px solid rgba(255,255,255,0.02);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:46px;height:46;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      font-weight:800;color:#111;background:linear-gradient(135deg,var(--accent),#ff7b7b);
      font-size:18px;
    }
    .brand-title{display:flex;flex-direction:column}
    .app-name{font-weight:700;letter-spacing:0.2px}
    .app-sub{font-size:12px;color:var(--muted)}

    /* Content scroll */
    .content{
      padding:12px;
      overflow:auto;
      flex:1;
      -webkit-overflow-scrolling:touch;
    }

    /* Search */
    .search{
      display:flex;align-items:center;gap:10px;background:var(--glass);
      padding:10px;border-radius:12px;margin-bottom:12px;
    }
    .search input{flex:1;background:transparent;border:0;outline:none;color:inherit;font-size:15px}

    /* Hero / featured */
    .hero{
      display:flex;gap:12px;align-items:center;padding:12px;border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      margin-bottom:14px;
    }
    .hero-art{width:92px;height:92;border-radius:12px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:800;font-size:22px}
    .hero-body h2{margin:0;font-size:18px}
    .hero-body p{margin:6px 0 0;color:var(--muted);font-size:13px}
    .hero-actions{margin-top:10px;display:flex;gap:8px}

    /* Section title */
    .section-title{display:flex;align-items:center;justify-content:space-between;margin:6px 0 8px 0}
    .section-title h3{margin:0;font-size:15px;font-weight:800}
    .section-title .small{font-size:12px;color:var(--muted)}

    /* Grid for releases */
    .releases{
      display:grid;
      grid-template-columns:repeat(2, 1fr);
      gap:10px;
      margin-bottom:12px;
    }
    .release{
      border-radius:12px;padding:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      display:flex;flex-direction:column;gap:8px;
    }
    .release-art{height:110px;border-radius:10px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:800;font-size:20px}

    /* Track list */
    .tracks{display:flex;flex-direction:column;gap:8px;padding-bottom:40px}
    .track{
      display:flex;align-items:center;gap:12px;padding:8px;border-radius:10px;
      transition:background .12s ease;
    }
    .track:hover{background:rgba(255,255,255,0.02)}
    .thumb{width:56px;height:56;border-radius:8px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:800}
    .meta{flex:1;min-width:0}
    .meta .title{font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta .artist{font-size:13px;color:var(--muted);margin-top:4px}

    .play-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:inherit;font-weight:700;cursor:pointer}

    /* Fixed bottom nav (app-like) */
    .bottom-nav{
      position:absolute;left:12px;right:12px;bottom:12px;
      height:64px;border-radius:14px;background:linear-gradient(180deg,rgba(12,12,12,0.98),rgba(6,6,6,0.98));
      display:flex;align-items:center;justify-content:space-around;padding:8px 12px;border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 14px 32px rgba(0,0,0,0.6);
    }
    .nav-item{display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--muted);font-weight:700;background:transparent;border:0;cursor:pointer}
    .nav-item.active{color:var(--accent)}
    .nav-icon{width:22px;height:22;display:inline-flex;align-items:center;justify-content:center}

    /* small helper */
    .muted{color:var(--muted)}
    .sr-only{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}

    /* strictly enforce portrait look on wide screens by limiting height and centering */
    @media (min-width:440px){
      body{background:linear-gradient(180deg,#050505,#070707);}
      .device{margin-top:28px}
    }
  </style>
</head>
<body>
  <div class="device" role="application" aria-label="Rainbow Music">
    <header class="appbar" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">RM</div>
        <div class="brand-title">
          <div class="app-name">Rainbow Music</div>
          <div class="app-sub">Choir Streaming</div>
        </div>
      </div>
      <div>
        <button class="play-btn" onclick="location.href='subscribe.html'">Subscribe</button>
      </div>
    </header>

    <main class="content" role="main" aria-live="polite">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="white" stroke-opacity="0.9" stroke-width="1.6" stroke-linecap="round"/></svg>
        <input id="search-input" type="search" placeholder="Search songs, artists, albums" aria-label="Search songs"/>
      </div>

      <!-- Featured hero -->
      <section class="hero" aria-label="Featured release">
        <div class="hero-art" aria-hidden="true">RV</div>
        <div class="hero-body">
          <h2>Sunday Praise Collection</h2>
          <p class="muted">Featured choir performances — curated playlists and exclusive releases.</p>
          <div class="hero-actions">
            <button class="play-btn" id="play-hero">Play</button>
            <button class="play-btn" onclick="location.href='library.html'">Library</button>
          </div>
        </div>
      </section>

      <!-- Releases grid -->
      <div class="section-title" aria-hidden="true">
        <h3>Releases</h3>
        <div class="small muted" id="updated">Updated • today</div>
      </div>

      <div class="releases" id="releases">
        <!-- injected -->
      </div>

      <!-- Top tracks -->
      <div class="section-title" style="margin-top:12px">
        <h3>Top Tracks</h3>
        <div class="small muted">For your choir</div>
      </div>

      <div class="tracks" id="tracks">
        <!-- injected -->
      </div>
    </main>

    <!-- Bottom navigation with SVG icons -->
    <nav class="bottom-nav" role="navigation" aria-label="Main">
      <button class="nav-item active" data-target="index.html" aria-label="Home" onclick="navClick(this)">
        <span class="nav-icon" aria-hidden="true">
          <!-- home icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" /></svg>
        </span>
        <span style="font-size:12px">Home</span>
      </button>

      <button class="nav-item" data-target="library.html" aria-label="Library" onclick="navClick(this)">
        <span class="nav-icon" aria-hidden="true">
          <!-- library icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M4 19h16" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/><path d="M5 3v14" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/><path d="M12 3v10" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/><path d="M19 3v6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>
        </span>
        <span style="font-size:12px">Library</span>
      </button>

      <button class="nav-item" data-target="player.html" aria-label="Player" onclick="navClick(this)">
        <span class="nav-icon" aria-hidden="true">
          <!-- play icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M5 3v18l15-9L5 3z" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span style="font-size:12px">Player</span>
      </button>

      <button class="nav-item" data-target="subscribe.html" aria-label="Subscribe" onclick="navClick(this)">
        <span class="nav-icon" aria-hidden="true">
          <!-- wallet / subscribe icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><rect x="3" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.2"/><circle cx="17" cy="12" r="1" fill="currentColor"/></svg>
        </span>
        <span style="font-size:12px">Subscribe</span>
      </button>
    </nav>
  </div>

  <script>
    /* Mobile-app style Home logic
       - Renders releases and top tracks
       - Saves selected track to localStorage and navigates to player.html
       - No audio playback on this page; player page will read the selected track and play
    */

    const TRACKS = [
      { id: 1, title: "Psalm of Hope", artist: "Rainbow Choir", duration: "3:12", file: "assets/music/sample1.mp3" },
      { id: 2, title: "Victory Anthem", artist: "Rainbow Choir", duration: "4:03", file: "assets/music/sample2.mp3" },
      { id: 3, title: "Worship Rising", artist: "Choir Ensemble", duration: "2:58", file: "assets/music/sample3.mp3" },
      { id: 4, title: "Grace Flow", artist: "Youth Chorus", duration: "3:40", file: "assets/music/sample4.mp3" },
      { id: 5, title: "Hallelujah Ring", artist: "Choir Ensemble", duration: "3:05", file: "assets/music/sample5.mp3" },
      { id: 6, title: "Peace Be Still", artist: "Rainbow Choir", duration: "4:20", file: "assets/music/sample6.mp3" }
    ];

    const releasesEl = document.getElementById('releases');
    const tracksEl = document.getElementById('tracks');
    const updatedEl = document.getElementById('updated');
    const searchInput = document.getElementById('search-input');

    function initials(s){
      return s.split(' ').map(w=>w[0]).slice(0,2).join('').toUpperCase();
    }

    function createReleaseCard(t){
      const el = document.createElement('div');
      el.className = 'release';
      el.innerHTML = `
        <div class="release-art">${initials(t.title)}</div>
        <div style="font-weight:800;font-size:14px">${t.title}</div>
        <div class="muted" style="font-size:13px">${t.artist} · ${t.duration}</div>
        <div style="margin-top:8px"><button class="play-btn small-play" data-id="${t.id}">Play</button></div>
      `;
      return el;
    }

    function createTrackRow(t){
      const row = document.createElement('div');
      row.className = 'track';
      row.innerHTML = `
        <div class="thumb">${initials(t.title)}</div>
        <div class="meta">
          <div class="title">${t.title}</div>
          <div class="artist">${t.artist} · ${t.duration}</div>
        </div>
        <div><button class="play-btn" data-id="${t.id}">Play</button></div>
      `;
      return row;
    }

    function renderHome(list){
      releasesEl.innerHTML = '';
      // show first 4 releases
      list.slice(0,4).forEach(t => releasesEl.appendChild(createReleaseCard(t)));
      tracksEl.innerHTML = '';
      list.forEach(t => tracksEl.appendChild(createTrackRow(t)));
    }

    // initial render
    renderHome(TRACKS);
    updatedEl.textContent = 'Updated • ' + new Date().toLocaleDateString(undefined,{ month:'short', day:'numeric' });

    // navigation helper - bottom nav
    function navClick(btn){
      // visually toggle
      document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
      btn.classList.add('active');
      // small delay for app-like feel
      setTimeout(()=> { location.href = btn.dataset.target; }, 160);
    }

    // Play interactions: save selected track (and optional queue) to localStorage, then navigate to player page
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-id]');
      if(!btn) return;
      const id = Number(btn.dataset.id);
      const track = TRACKS.find(t => t.id === id);
      if(!track) return;
      // save
      localStorage.setItem('rm_current_track', JSON.stringify(track));
      // if clicking hero play, set a simple queue
      if(e.target && e.target.id === 'play-hero'){
        const queue = TRACKS.slice(0,3);
        localStorage.setItem('rm_queue', JSON.stringify(queue));
      } else {
        // set queue starting from selected track
        const idx = TRACKS.findIndex(x => x.id === id);
        const queue = TRACKS.slice(idx).concat(TRACKS.slice(0,idx));
        localStorage.setItem('rm_queue', JSON.stringify(queue));
      }
      // highlight player nav then go
      const playerBtn = document.querySelector('[data-target="player.html"]');
      if(playerBtn){
        document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
        playerBtn.classList.add('active');
      }
      setTimeout(()=> location.href = 'player.html', 140);
    });

    // search filtering (client-side)
    searchInput.addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase();
      if(!q){ renderHome(TRACKS); return; }
      const filtered = TRACKS.filter(t => (t.title + ' ' + t.artist).toLowerCase().includes(q));
      renderHome(filtered);
    });

    // ensure keyboard Enter doesn't submit or navigate
    searchInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') e.preventDefault(); });

    // small accessibility: focus search on load for mobile presentation
    window.addEventListener('load', ()=>{ setTimeout(()=> searchInput.focus(), 200); });
  </script>
</body>
</html>
